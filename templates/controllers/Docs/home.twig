{% extends 'layouts/default.twig' %}

{% block head %}

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
    <link rel="stylesheet" href="//cdn.rawgit.com/jnicol/trackpad-scroll-emulator/master/css/trackpad-scroll-emulator.css">
    <link rel="stylesheet" href="/bundles/docs/css/docs.css">

{% endblock %}

{% block content %}

    <div role="flatdoc">
        <div class="tse-scrollable docs-nav">
            <div class="tse-content" role="flatdoc-menu"></div>
        </div>
        <div class="tse-scrollable docs-content">
            <div class="tse-content">
                <div class="content">
                    <div style="text-align: right">
                        <a href="/" class="action-button">Home page &raquo;</a>
                    </div>
                    {% if this.app.bundles.has('welcome') %}
                        {{ this.cell('Logo') }}
                    {% endif %}
                    <div role="flatdoc-content"></div>
                    <div style="text-align: right">
                        <a href="{$this->app->config->get('bundle.docs.url.improve')}" class="action-button">Improve this doc &raquo;</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block scripts %}

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
    <script src="//cdn.rawgit.com/rstacruz/flatdoc/v0.9.0/flatdoc.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/waypoints.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lettering.js/0.7.0/jquery.lettering.js"></script>
    <script src="//cdn.rawgit.com/jnicol/trackpad-scroll-emulator/master/jquery.trackpad-scroll-emulator.js"></script>
    <script>

        $(document).ready(function() {

            $('.page-heading h1 a').lettering();

            Flatdoc.run({
                fetcher: Flatdoc.file('/bundles/docs/README.md')
            });

        });

        $(document).on('flatdoc:ready', function() {

            $('.docs-nav, .docs-content').TrackpadScrollEmulator();

            $('h1, h2, h3', '.docs-content').waypoint(function(direction) {
                var id = $(this).attr('id');
                $('.docs-nav a').removeClass('active');
                $("[href='#" + id + "']").addClass('active');
            }, {
                context: '.docs-content .tse-scroll-content'
            });

            $('pre code').each(function(i, block) {
                hljs.highlightBlock(block);
            });

            if (window.location.hash) {
                $(window.location.hash).get(0).scrollIntoView();
            }

        });

    </script>

{% endblock %}

